((function(){var a=this,b;typeof require!="undefined"?(b=require("./underscore-min"),b.str=require("./underscore.string-min"),b.hmap=require("./underscore.hashmap-min"),b.mixin(b.str.exports())):b=a._;var c=function(a,c){var d=function(a,c){return b.map(a,function(a){return b.map(c,function(b){return a+b})})};return b.flatten(d(a,c))},d=["1","2","3","4","5","6","7","8","9"],e=["A","B","C","D","E","F","G","H","I"],f=d,g=e.length*f.length,h=c(e,f),i=b.union(b.map(f,function(a){return c(e,[a])}),b.map(e,function(a){return c([a],f)}),b.reduce([["A","B","C"],["D","E","F"],["G","I","J"]],function(a,d){return b.map([[1,2,3],[4,5,6],[7,8,9]],function(b){a.push(c(d,b))}),a},[])),j=b.reduce(h,function(a,c){var d=b.select(i,function(a){return b.include(a,c)});return a[c]=b.flatten(d),a},{}),k=b.reduce(h,function(a,c){return a[c]=b.difference(j[c],[c]),a},{}),l=function(){var a=b.reduce(h,function(a,b){return a[b]=d,a},{}),c=function(a){return a=a.replace(/[^0-9.]/g,""),pairs=b.reject(b.zip(h,a),function(a){return b.include(a,undefined)}),b.reduce(pairs,function(a,b){return a[b[0]]=b[1],a},{})};return function(d){return gvals=c(d),b.any(gvals,function(b,c){return!m(a,c,b)})?!1:a}},m=function(a,c,e){if(!b.include(d,e))return a;var f=b.difference(a[c],[e]);return b.all(f,function(b){return n(a,c,b)})?a:!1},n=function(a,c,d){if(!b.include(a[c],d))return a;a[c]=b.difference(a[c],[d]);if(b.isEmpty(a[c]))return!1;if(b.size(a[c])==1){var e=b.first(a[c]);if(!b.all(k[c],function(b){return n(a,b,e)}))return!1}return dplaces=b.select(j[c],function(c){return b.include(a[c],d)}),dplaces.length==0?!1:dplaces.length==1&&!m(a,dplaces[0],d)?!1:a},o=function(a){if(b.isEmpty(a))return!1;if(b.all(a,function(a,b){return a.length==1}))return a;var c=b.chain(a).select(function(a,b){return a.length>1}).min(function(a,b){return a.length}).size().value(),d=b.keys(b.hmap.select(a,function(a,b){return a.length==c}))[0],e=b.flatten(b.map(a[d],function(c){return o(m(b.clone(a),d,c))}));return b.find(e,function(a){return a})},p={solve:function(a){var b=l();return o(b(a))},display:function(a){var c=1+b.max(b.flatten(b.map(h,function(c){return b.size(a[c])}))),d=b.reduce([1,1,1],function(a,d){return a.push(b.str.repeat("-",3*c)),a},[]).join("+");b.each(e,function(e){var g=b.reduce(f,function(d,f){return d+=b.str.center(a[e+f].join(""),c," "),b.include(["3","6"],f)&&(d+="|"),d},"");console.log(g),b.include(["C","F"],e)&&console.log(d)})},html:function(a){var c="",d=1+b.max(b.flatten(b.map(h,function(c){return b.size(a[c])}))),g=b.reduce([1,1,1],function(a,c){return a.push(b.str.repeat("-",3*d)),a},[]).join("+");return b.each(e,function(e){c+=b.reduce(f,function(c,f){return c+=b.str.center(a[e+f].join(""),d," "),b.include(["3","6"],f)&&(c+="|"),c},"")+"<br/>",b.include(["C","F"],e)&&(c+=g+"<br/>")}),c}};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=p),exports.sudoku=p):a.sudoku=p})).call(this);